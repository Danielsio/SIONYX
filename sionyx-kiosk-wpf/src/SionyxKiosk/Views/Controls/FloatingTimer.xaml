<Window x:Class="SionyxKiosk.Views.Controls.FloatingTimer"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        WindowStyle="None" AllowsTransparency="True" Background="Transparent"
        Topmost="True" ShowInTaskbar="False"
        Width="520" Height="110" ResizeMode="NoResize"
        MouseLeftButtonDown="Window_MouseLeftButtonDown">
    <Border x:Name="TimerBorder" CornerRadius="20" Padding="28,0"
            ClipToBounds="True">
        <Border.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0.6">
                <GradientStop Color="#1E1B4B" Offset="0" />
                <GradientStop Color="#312E81" Offset="0.5" />
                <GradientStop Color="#3730A3" Offset="1" />
            </LinearGradientBrush>
        </Border.Background>
        <Border.Effect>
            <DropShadowEffect BlurRadius="36" ShadowDepth="6" Direction="270"
                              Color="#000000" Opacity="0.4" />
        </Border.Effect>
        <Grid VerticalAlignment="Center">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <!-- Time remaining (primary hero) -->
            <StackPanel Grid.Column="0" VerticalAlignment="Center">
                <TextBlock x:Name="TimeText" Text="00:00:00"
                           FontSize="36" FontWeight="Bold" FontFamily="Cascadia Code, Consolas"
                           Foreground="White" />
                <TextBlock x:Name="TimeLabel" Text="×–×ž×Ÿ × ×•×ª×¨" FontSize="14"
                           Foreground="#A5B4FC" FontWeight="Medium" Margin="2,2,0,0" />
            </StackPanel>

            <!-- Vertical separator -->
            <Border Grid.Column="1" Width="1" Background="#FFFFFF18"
                    Margin="24,8" VerticalAlignment="Stretch" />

            <!-- Usage time + Print balance -->
            <StackPanel Grid.Column="2" VerticalAlignment="Center">
                <StackPanel Orientation="Horizontal" Margin="0,0,0,4">
                    <TextBlock Text="â±" FontSize="14" Foreground="#A5B4FC"
                               VerticalAlignment="Center" Margin="0,0,8,0" />
                    <TextBlock x:Name="UsageText" Text="00:00" FontSize="18"
                               FontFamily="Cascadia Code, Consolas"
                               FontWeight="SemiBold" Foreground="#E0E7FF" />
                </StackPanel>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="ðŸ–¨" FontSize="14" Foreground="#A5B4FC"
                               VerticalAlignment="Center" Margin="0,0,8,0" />
                    <TextBlock x:Name="PrintText" Text="0.00 â‚ª" FontSize="18"
                               FontFamily="Cascadia Code, Consolas"
                               FontWeight="SemiBold" Foreground="#E0E7FF" />
                </StackPanel>
            </StackPanel>

            <!-- Offline indicator -->
            <Border x:Name="OfflineBadge" Grid.Column="3" Visibility="Collapsed"
                    Background="#FEF3C7" CornerRadius="10" Padding="12,6" Margin="16,0,0,0"
                    VerticalAlignment="Center" HorizontalAlignment="Left">
                <TextBlock Text="âš  Offline" FontSize="14" FontWeight="SemiBold"
                           Foreground="#92400E" />
            </Border>

            <!-- Return to app button â€” polished pill shape -->
            <Button Grid.Column="4"
                    ToolTip="×—×–×¨×” ×œ××¤×œ×™×§×¦×™×”" Margin="16,0,0,0"
                    Cursor="Hand" Click="ReturnButton_Click">
                <Button.Template>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="bg" CornerRadius="14" Padding="16,10"
                                SnapsToDevicePixels="True">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="#6366F1" Offset="0" />
                                    <GradientStop Color="#818CF8" Offset="1" />
                                </LinearGradientBrush>
                            </Border.Background>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="â†©" FontSize="18" Foreground="White"
                                           VerticalAlignment="Center" Margin="0,0,8,0" />
                                <TextBlock Text="×—×–×¨×”" FontSize="15" FontWeight="SemiBold"
                                           Foreground="White" VerticalAlignment="Center" />
                            </StackPanel>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="bg" Property="Background">
                                    <Setter.Value>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#818CF8" Offset="0" />
                                            <GradientStop Color="#A5B4FC" Offset="1" />
                                        </LinearGradientBrush>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="bg" Property="Background">
                                    <Setter.Value>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#4F46E5" Offset="0" />
                                            <GradientStop Color="#6366F1" Offset="1" />
                                        </LinearGradientBrush>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Button.Template>
            </Button>
        </Grid>
    </Border>
</Window>
