<Window x:Class="SionyxKiosk.Views.Windows.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:controls="clr-namespace:SionyxKiosk.Views.Controls"
        Title="SIONYX"
        WindowState="Maximized" Topmost="True"
        WindowStyle="None" ResizeMode="NoResize"
        FlowDirection="RightToLeft">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="260" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <!-- SIDEBAR -->
        <Border Grid.Column="0" Background="{StaticResource SidebarGradient}">
            <DockPanel>
                <!-- Logo + user info area -->
                <Border DockPanel.Dock="Top" Padding="24,28,24,24"
                        BorderBrush="#FFFFFF12" BorderThickness="0,0,0,1">
                    <StackPanel>
                        <TextBlock Text="SIONYX" FontSize="28" FontWeight="ExtraBold"
                                   Foreground="White" Margin="0,0,0,14" />
                        <!-- User avatar circle + name -->
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,4">
                            <Border Width="44" Height="44" CornerRadius="22"
                                    Background="{StaticResource PrimaryGradient}" Margin="0,0,14,0">
                                <TextBlock x:Name="AvatarInitials" Text="?" FontSize="17"
                                           FontWeight="SemiBold" Foreground="White"
                                           HorizontalAlignment="Center" VerticalAlignment="Center" />
                            </Border>
                            <StackPanel VerticalAlignment="Center">
                                <TextBlock Text="{Binding CurrentUser.FullName}" FontSize="16"
                                           FontWeight="SemiBold" Foreground="White" />
                                <TextBlock Text="{Binding CurrentUser.PhoneNumber}" FontSize="13"
                                           Foreground="#FFFFFF88" />
                            </StackPanel>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- Logout button at bottom -->
                <Border DockPanel.Dock="Bottom" Padding="16,16">
                    <Button Style="{StaticResource BtnDanger}"
                            Command="{Binding LogoutCommand}">
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                            <!-- Segoe MDL2 Assets: SignOut glyph (E77B) -->
                            <TextBlock Text="&#xE77B;" FontFamily="Segoe MDL2 Assets"
                                       FontSize="18" Foreground="White"
                                       VerticalAlignment="Center" Margin="0,0,10,0" />
                            <TextBlock Text="התנתק" VerticalAlignment="Center"
                                       FontSize="15" FontWeight="SemiBold" />
                        </StackPanel>
                    </Button>
                </Border>

                <!-- Nav items -->
                <StackPanel Margin="8,16,8,0">
                    <RadioButton x:Name="NavHome" Content="  דף הבית" Tag="Home"
                                 Style="{StaticResource SidebarNavButton}" IsChecked="True"
                                 Checked="NavButton_Checked" GroupName="Nav" />
                    <RadioButton x:Name="NavPackages" Content="  חבילות" Tag="Packages"
                                 Style="{StaticResource SidebarNavButton}"
                                 Checked="NavButton_Checked" GroupName="Nav" />
                    <RadioButton x:Name="NavHistory" Content="  היסטוריה" Tag="History"
                                 Style="{StaticResource SidebarNavButton}"
                                 Checked="NavButton_Checked" GroupName="Nav" />
                    <RadioButton x:Name="NavHelp" Content="  עזרה" Tag="Help"
                                 Style="{StaticResource SidebarNavButton}"
                                 Checked="NavButton_Checked" GroupName="Nav" />
                </StackPanel>
            </DockPanel>
        </Border>

        <!-- MAIN CONTENT -->
        <Grid Grid.Column="1" Background="{StaticResource BgPrimaryBrush}">
            <Frame x:Name="ContentFrame" NavigationUIVisibility="Hidden" Margin="40,36" />

            <!-- Toast overlay (top of content area) -->
            <controls:ToastNotification x:Name="Toast"
                                        HorizontalAlignment="Center" VerticalAlignment="Top"
                                        Margin="0,16,0,0" Panel.ZIndex="100" />
        </Grid>
    </Grid>
</Window>
