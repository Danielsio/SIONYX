<Window x:Class="SionyxKiosk.Views.Dialogs.PaymentDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:wv2="clr-namespace:Microsoft.Web.WebView2.Wpf;assembly=Microsoft.Web.WebView2.Wpf"
        WindowState="Maximized"
        WindowStyle="None" AllowsTransparency="True" Background="Transparent"
        FlowDirection="RightToLeft" Topmost="True">

    <Grid>
        <!-- Dark backdrop -->
        <Border Background="#000000" Opacity="0.62" />

        <!-- Unified card wrapper -->
        <Border x:Name="DialogCard"
                HorizontalAlignment="Center" VerticalAlignment="Center"
                CornerRadius="24" ClipToBounds="True">
            <Border.Effect>
                <DropShadowEffect BlurRadius="80" ShadowDepth="0"
                                  Color="#000000" Opacity="0.45" />
            </Border.Effect>

            <Grid x:Name="LayoutGrid">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition x:Name="SummaryColumn" Width="380" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <!-- â•â•â•â•â•â•â•â•â•â•â• LEFT: Order Summary â•â•â•â•â•â•â•â•â•â•â• -->
                <Border Grid.Column="0">
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="0.3,1">
                            <GradientStop Color="#5B6CFF" Offset="0" />
                            <GradientStop Color="#6F63F2" Offset="0.35" />
                            <GradientStop Color="#7C3AED" Offset="0.75" />
                            <GradientStop Color="#6D28D9" Offset="1" />
                        </LinearGradientBrush>
                    </Border.Background>
                    <DockPanel>

                        <!-- Close button -->
                        <Button DockPanel.Dock="Top" Click="CloseButton_Click"
                                HorizontalAlignment="Left" Margin="18,18,0,0" Cursor="Hand">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Border x:Name="CloseBg" Width="38" Height="38"
                                            CornerRadius="19" Background="#15FFFFFF">
                                        <TextBlock x:Name="CloseX" Text="âœ•"
                                                   FontSize="16" FontWeight="Bold" Foreground="#AAFFFFFF"
                                                   HorizontalAlignment="Center" VerticalAlignment="Center" />
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="CloseBg" Property="Background" Value="#30FFFFFF" />
                                            <Setter TargetName="CloseX" Property="Foreground" Value="White" />
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>

                        <!-- Summary content â€” vertically centered -->
                        <StackPanel VerticalAlignment="Center" Margin="40,0,40,32">

                            <!-- Shield icon -->
                            <Border Width="68" Height="68" CornerRadius="18"
                                    Background="#14FFFFFF" Margin="0,0,0,24"
                                    HorizontalAlignment="Center">
                                <TextBlock Text="ðŸ›¡" FontSize="30"
                                           HorizontalAlignment="Center" VerticalAlignment="Center" />
                            </Border>

                            <TextBlock Text="×¡×™×›×•× ×”×–×ž× ×”" FontSize="24" FontWeight="ExtraBold"
                                       Foreground="White" HorizontalAlignment="Center" Margin="0,0,0,5" />
                            <TextBlock Text="×¤×¨×˜×™ ×”×ª×©×œ×•× ×©×œ×š ×ž×•×’× ×™× ×‘×”×¦×¤× ×” ×ž×œ××”" FontSize="13"
                                       Foreground="#90FFFFFF" HorizontalAlignment="Center"
                                       TextWrapping="Wrap" TextAlignment="Center" Margin="0,0,0,32" />

                            <!-- Package name -->
                            <TextBlock x:Name="PackageNameText" FontSize="28" FontWeight="ExtraBold"
                                       Foreground="White" HorizontalAlignment="Center" Margin="0,0,0,24" />

                            <!-- Separator -->
                            <Border Height="1" Background="#20FFFFFF" Margin="0,0,0,24" />

                            <!-- Detail: Time -->
                            <Grid Margin="0,0,0,16">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="â±" FontSize="18"
                                           VerticalAlignment="Center" Margin="0,0,12,0" />
                                <TextBlock Grid.Column="1" Text="×–×ž×Ÿ:" FontSize="18"
                                           Foreground="#CCFFFFFF" VerticalAlignment="Center" />
                                <TextBlock Grid.Column="2" x:Name="PackageMinutesText"
                                           FontSize="18" FontWeight="Bold" Foreground="White"
                                           VerticalAlignment="Center" />
                            </Grid>

                            <!-- Detail: Prints -->
                            <Grid Margin="0,0,0,16">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="ðŸ–¨" FontSize="18"
                                           VerticalAlignment="Center" Margin="0,0,12,0" />
                                <TextBlock Grid.Column="1" Text="×”×“×¤×¡×•×ª:" FontSize="18"
                                           Foreground="#CCFFFFFF" VerticalAlignment="Center" />
                                <TextBlock Grid.Column="2" x:Name="PackagePrintsText"
                                           FontSize="18" FontWeight="Bold" Foreground="White"
                                           VerticalAlignment="Center" />
                            </Grid>

                            <!-- Detail: Validity -->
                            <Grid Margin="0,0,0,28">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="ðŸ“…" FontSize="18"
                                           VerticalAlignment="Center" Margin="0,0,12,0" />
                                <TextBlock Grid.Column="1" Text="×ª×•×§×£:" FontSize="18"
                                           Foreground="#CCFFFFFF" VerticalAlignment="Center" />
                                <TextBlock Grid.Column="2" x:Name="PackageValidityText"
                                           FontSize="18" FontWeight="Bold" Foreground="White"
                                           VerticalAlignment="Center" />
                            </Grid>

                            <!-- Separator -->
                            <Border Height="1" Background="#20FFFFFF" Margin="0,0,0,28" />

                            <!-- Price area -->
                            <StackPanel HorizontalAlignment="Center" Margin="0,0,0,10">
                                <TextBlock Text="×¡×›×•× ×œ×ª×©×œ×•×" FontSize="14" FontWeight="SemiBold"
                                           Foreground="#90FFFFFF" HorizontalAlignment="Center" Margin="0,0,0,8" />
                                <TextBlock x:Name="OriginalPriceText" FontSize="20"
                                           Foreground="#70FFFFFF" HorizontalAlignment="Center"
                                           TextDecorations="Strikethrough" Visibility="Collapsed" />
                                <TextBlock x:Name="PackagePriceText" FontSize="56" FontWeight="ExtraBold"
                                           Foreground="White" HorizontalAlignment="Center" Margin="0,-4,0,0" />
                            </StackPanel>

                            <!-- Discount badge -->
                            <Border x:Name="DiscountBadge" CornerRadius="12" Padding="16,7"
                                    HorizontalAlignment="Center" Margin="0,6,0,0"
                                    Visibility="Collapsed" Background="#10B981">
                                <TextBlock x:Name="DiscountBadgeText" FontSize="15" FontWeight="Bold"
                                           Foreground="White" HorizontalAlignment="Center" />
                            </Border>
                        </StackPanel>
                    </DockPanel>
                </Border>

                <!-- â•â•â•â•â•â•â•â•â•â•â• RIGHT: Payment Form â•â•â•â•â•â•â•â•â•â•â• -->
                <Border Grid.Column="1" Background="White">
                    <wv2:WebView2 x:Name="PaymentWebView" />
                </Border>
            </Grid>
        </Border>
    </Grid>
</Window>
